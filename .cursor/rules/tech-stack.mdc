---
description: "技术栈规范 - 项目实际使用的技术栈和配置"
---

# 技术栈规范

## 项目实际使用的技术栈

**当前项目采用的技术栈组合**：

- ✅ **UI组件库**：Element Plus 2.11.7
- ✅ **样式方案**：Tailwind CSS 4.1.17 + Sass（组合使用）
- ✅ **状态管理**：Pinia 3.0.4
- ✅ **路由管理**：Vue Router 4.6.3
- ✅ **国际化**：vue-i18n 11.1.12
- ✅ **构建工具**：Vite 6.0.11 + TypeScript 5.6.3
- ✅ **自动导入**：unplugin-auto-import + unplugin-vue-components（Element Plus自动导入）
- ✅ **代码质量**：ESLint 9 + Prettier 3 + TypeScript ESLint
- ✅ **样式预处理**：sass-embedded 1.93.3

**技术栈组合**：Element Plus + Tailwind CSS + Sass（三样式方案组合）

## 核心原则

- **轻量级优先**：uTools插件需要控制体积，优先选择轻量级方案
- **按需引入**：支持Tree-shaking，避免打包体积过大
- **类型安全**：全面TypeScript支持
- **易于迁移**：标准化的技术选型，便于迁移到其他平台

## 一、状态管理

### Pinia

```bash
npm install pinia
```

**版本**：3.0.4

**理由**：
- Vue 3官方推荐的状态管理库
- 轻量级（约1KB），支持TypeScript
- 支持DevTools，开发体验好
- 模块化设计，易于扩展

**使用场景**：
- 全局状态管理（用户信息、主题配置等）
- 跨组件数据共享
- 缓存管理

## 二、UI组件库

### Element Plus

```bash
npm install element-plus
```

**版本**：2.11.7

**优势**：
- 生态成熟，文档完善
- 组件丰富
- 企业级应用广泛使用
- 支持自动导入（unplugin-vue-components）

**配置**：
- 使用 `unplugin-vue-components` 实现按需自动导入
- 在 `vite.config.ts` 中配置 `ElementPlusResolver`

**使用方式**：
```typescript
// vite.config.ts
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
import Components from 'unplugin-vue-components/vite'

export default defineConfig({
  plugins: [
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
})
```

## 三、样式方案

### Tailwind CSS

```bash
npm install -D tailwindcss postcss autoprefixer
```

**版本**：4.1.17

**优势**：
- 生态成熟，文档完善
- 工具类丰富
- 社区支持好
- Tailwind CSS 4.x 支持更灵活的配置

**配置**：
- 使用 Tailwind CSS 4.1.17（最新版本）
- 在 `src/styles/tailwind.css` 中使用 `@import "tailwindcss"` 导入
- 与 Sass 组合使用，CSS变量定义在 `src/styles/variables.scss`

**使用方式**：
```css
/* src/styles/tailwind.css */
@import "tailwindcss";
```

### Sass/SCSS

```bash
npm install -D sass-embedded
```

**版本**：1.93.3

**优势**：
- 传统方案，学习成本低
- 变量、嵌套、混入等特性
- 完全控制样式
- sass-embedded 性能更好，编译速度更快

**配置**：
- 使用 `sass-embedded` 1.93.3
- 样式变量定义在 `src/styles/variables.scss`
- 与 Tailwind CSS 组合使用，Tailwind 用于工具类，Sass 用于自定义样式和变量

**样式组合使用**：
- Element Plus：复杂组件（Table、Form、Dialog等）
- Tailwind CSS：布局和工具类样式
- Sass：自定义样式变量和复杂样式逻辑
- 三者可以完美组合使用，互不冲突

## 四、路由管理

### Vue Router

```bash
npm install vue-router@4
```

**版本**：4.6.3

**理由**：
- 标准化的路由管理方案
- 支持路由守卫、懒加载等高级特性
- 易于迁移到其他平台

**使用场景**：
- 虽然uTools有自己的路由机制，但使用Vue Router可以：
  - 统一管理页面路由
  - 支持路由守卫和导航守卫
  - 支持懒加载优化性能
  - 更好的开发体验和代码组织

**配置示例**：
```typescript
// src/router/index.ts
import { createRouter, createWebHistory } from 'vue-router'
import Login from '@/views/Login.vue'
import TopicList from '@/views/TopicList.vue'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    { path: '/login', name: 'Login', component: Login },
    { path: '/topics', name: 'TopicList', component: TopicList },
  ]
})
```

## 五、国际化

### vue-i18n

```bash
npm install vue-i18n
```

**版本**：11.1.12

**理由**：
- Vue官方推荐的国际化方案
- 支持TypeScript
- 支持动态切换语言
- 易于维护和扩展

**配置**：
- 语言文件存放在 `src/locales/` 目录
- 支持中文（zh-CN）和英文（en-US）
- 通过 `useI18n` composable 在组件中使用

## 六、开发工具

### 代码质量

#### ESLint

```bash
npm install -D eslint @eslint/js @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-vue eslint-plugin-prettier eslint-config-prettier
```

**版本**：9.39.1

**配置**：统一代码风格，提升可维护性

#### Prettier

```bash
npm install -D prettier
```

**版本**：3.6.2

**配置**：与ESLint配合使用，自动格式化代码

### 构建优化

#### 自动导入插件

```bash
npm install -D unplugin-auto-import unplugin-vue-components
```

**版本**：
- unplugin-auto-import: 20.2.0
- unplugin-vue-components: 30.0.0

**用途**：
- 自动导入Vue API（ref、computed等）
- 自动导入Element Plus组件
- 减少import语句，提升开发效率

**配置示例**：
```typescript
// vite.config.ts
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

export default defineConfig({
  plugins: [
    AutoImport({
      resolvers: [ElementPlusResolver()],
    }),
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
})
```

## 七、完整技术栈配置

### package.json 依赖

```json
{
  "dependencies": {
    "vue": "^3.5.13",
    "pinia": "^3.0.4",
    "element-plus": "^2.11.7",
    "vue-i18n": "^11.1.12",
    "vue-router": "^4.6.3"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.2.1",
    "typescript": "^5.6.3",
    "vite": "^6.0.11",
    "vue-tsc": "^2.1.10",
    "sass-embedded": "^1.93.3",
    "tailwindcss": "^4.1.17",
    "postcss": "^8.5.6",
    "autoprefixer": "^10.4.22",
    "eslint": "^9.39.1",
    "@eslint/js": "^9.39.1",
    "@typescript-eslint/eslint-plugin": "^8.46.4",
    "@typescript-eslint/parser": "^8.46.4",
    "eslint-plugin-vue": "^10.5.1",
    "eslint-plugin-prettier": "^5.5.4",
    "eslint-config-prettier": "^10.1.8",
    "prettier": "^3.6.2",
    "unplugin-auto-import": "^20.2.0",
    "unplugin-vue-components": "^30.0.0",
    "utools-api-types": "^6.1.0",
    "vue-eslint-parser": "^10.2.0",
    "globals": "^16.5.0"
  }
}
```

**技术栈特点**：
- ✅ 使用 Element Plus 作为UI组件库
- ✅ 使用 Tailwind CSS 4.x + Sass 组合样式方案
- ✅ 使用 Vue Router 进行路由管理
- ✅ 使用 vue-i18n 进行国际化
- ✅ 使用 unplugin-auto-import 和 unplugin-vue-components 实现自动导入
- ✅ 使用 ESLint 9 + Prettier 3 进行代码质量保障

## 八、迁移能力考虑

### 1. 避免平台特定依赖
- ❌ 避免：直接使用Node.js API（已通过window.services封装）
- ✅ 推荐：使用标准Web API

### 2. 抽象平台差异
- 创建平台适配层（`src/utils/platform.ts`）
- 统一API接口，便于迁移

### 3. 配置外部化
- 环境变量管理（`.env`文件）
- 配置文件集中管理

### 4. 构建配置标准化
- 使用标准Vite配置
- 避免自定义构建工具

## 九、注意事项

1. **体积控制**：uTools插件需要控制体积，优先选择支持Tree-shaking的库
2. **按需引入**：避免全量引入，使用按需引入插件
3. **类型安全**：所有库都应支持TypeScript
4. **兼容性**：考虑uTools的浏览器环境兼容性
5. **迁移性**：选择标准化的技术栈，避免小众库
6. **样式优先级**：注意UI组件库样式和原子化CSS的优先级问题
7. **样式组合**：Element Plus、Tailwind CSS 和 Sass 可以完美组合使用，互不冲突
